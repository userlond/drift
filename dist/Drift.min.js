!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Drift=e()}}(function(){return function e(t,i,n){function s(l,h){if(!i[l]){if(!t[l]){var a="function"==typeof require&&require;if(!h&&a)return a(l,!0);if(o)return o(l,!0);var r=new Error("Cannot find module '"+l+"'");throw r.code="MODULE_NOT_FOUND",r}var u=i[l]={exports:{}};t[l][0].call(u.exports,function(e){var i=t[l][1][e];return s(i?i:e)},u,u.exports,e,t,i,n)}return i[l].exports}for(var o="function"==typeof require&&require,l=0;l<n.length;l++)s(n[l]);return s}({1:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("./util/dom"),h=e("./injectBaseStylesheet"),a=n(h),r=e("./ImageHighlighter"),u=n(r),d=e("./Trigger"),c=n(d),g=e("./ZoomPane"),f=n(g);t.exports=function(){function e(t){var i=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(s(this,e),this.VERSION="0.1.7",this.destroy=function(){i.trigger._unbindEvents()},this.triggerEl=t,!(0,l.isDOMElement)(this.triggerEl))throw new TypeError("`new Drift` requires a DOM element as its first argument.");var o=n.namespace,h=void 0===o?null:o,r=n.showWhitespaceAtEdges,u=void 0===r?!1:r,d=n.containInline,c=void 0===d?!1:d,g=n.inlineOffsetX,f=void 0===g?0:g,m=n.inlineOffsetY,v=void 0===m?0:m,p=n.sourceAttribute,y=void 0===p?"data-zoom":p,w=n.zoomFactor,b=void 0===w?3:w,C=n.paneContainer,_=void 0===C?document.body:C,E=n.inlinePane,z=void 0===E?375:E,S=n.handleTouch,P=void 0===S?!0:S,H=n.onShow,k=void 0===H?null:H,O=n.onHide,L=void 0===O?null:O,I=n.injectBaseStyles,M=void 0===I?!0:I,T=n.highlightImage,x=void 0===T?!0:T,A=n.highlightColor,W=void 0===A?"rgba(0, 0, 0, 0.5)":A;if(z!==!0&&!(0,l.isDOMElement)(_))throw new TypeError("`paneContainer` must be a DOM element when `inlinePane !== true`");this.settings={namespace:h,showWhitespaceAtEdges:u,containInline:c,inlineOffsetX:f,inlineOffsetY:v,sourceAttribute:y,zoomFactor:b,paneContainer:_,inlinePane:z,handleTouch:P,onShow:k,onHide:L,injectBaseStyles:M,highlightImage:x,highlightColor:W},this.settings.injectBaseStyles&&(0,a["default"])(),this._buildImageHighlighter(),this._buildZoomPane(),this._buildTrigger()}return o(e,[{key:"_buildImageHighlighter",value:function(){this.settings.highlightImage&&(this.imageHighlighter=new u["default"](this.triggerEl,this.settings.highlightColor))}},{key:"_buildZoomPane",value:function(){this.zoomPane=new f["default"]({container:this.settings.paneContainer,zoomFactor:this.settings.zoomFactor,showWhitespaceAtEdges:this.settings.showWhitespaceAtEdges,containInline:this.settings.containInline,inline:this.settings.inlinePane,namespace:this.settings.namespace,inlineOffsetX:this.settings.inlineOffsetX,inlineOffsetY:this.settings.inlineOffsetY})}},{key:"_buildTrigger",value:function(){this.trigger=new c["default"]({el:this.triggerEl,zoomPane:this.zoomPane,imageHighlighter:this.imageHighlighter,handleTouch:this.settings.handleTouch,onShow:this.settings.onShow,onHide:this.settings.onHide,sourceAttribute:this.settings.sourceAttribute})}},{key:"isShowing",get:function(){return this.zoomPane.isShowing}},{key:"zoomFactor",get:function(){return this.settings.zoomFactor},set:function(e){this.settings.zoomFactor=e,this.zoomPane.settings.zoomFactor=e}}]),e}()},{"./ImageHighlighter":2,"./Trigger":3,"./ZoomPane":4,"./injectBaseStylesheet":5,"./util/dom":6}],2:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.exports=function(){function e(t,i){n(this,e),this.imageElement=t,this.highlightColor=i}return s(e,[{key:"_buildCanvas",value:function(){var e=this.imageElement.getBoundingClientRect();document.body.getBoundingClientRect();this.canvas||(this.canvas=document.createElement("canvas"),document.body.appendChild(this.canvas)),this.canvas.width=e.width,this.canvas.height=e.height,this.canvas.style.setProperty("position","absolute"),this.canvas.style.setProperty("left",e.left+"px"),this.canvas.style.setProperty("top",e.top+"px"),this.canvas.style.setProperty("pointer-events","none"),this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle=this.highlightColor}},{key:"setPosition",value:function(e,t){if(this.highlightSize){var i=t*this.imageElement.clientHeight-this.highlightSize.height/2,n=e*this.imageElement.clientWidth-this.highlightSize.width/2;0>i?i=0:i+this.highlightSize.height>this.canvas.height&&(i=this.canvas.height-this.highlightSize.height),0>n?n=0:n+this.highlightSize.width>this.canvas.width&&(n=this.canvas.width-this.highlightSize.width),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillRect(n,i,this.highlightSize.width,this.highlightSize.height)}}},{key:"show",value:function(e){this._buildCanvas();var t=e.getSize();this.zoomPaneAR=t.width/t.height,this.zoomFactor=e.settings.zoomFactor,this.highlightSize={width:t.width/this.zoomFactor,height:t.height/this.zoomFactor},this.canvas.style.setProperty("display","block")}},{key:"hide",value:function(){this.canvas.style.setProperty("display","none")}}]),e}()},{}],3:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("./util/throwIfMissing"),h=n(l),a=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];s(this,e),r.call(this);var i=t.el,n=void 0===i?(0,h["default"])():i,o=t.zoomPane,l=void 0===o?(0,h["default"])():o,a=t.sourceAttribute,u=void 0===a?(0,h["default"])():a,d=t.handleTouch,c=void 0===d?(0,h["default"])():d,g=t.onShow,f=void 0===g?null:g,m=t.onHide,v=void 0===m?null:m,p=t.imageHighlighter,y=void 0===p?null:p;this.settings={el:n,zoomPane:l,sourceAttribute:u,handleTouch:c,onShow:f,onHide:v,imageHighlighter:y},this._bindEvents()}return o(e,[{key:"_bindEvents",value:function(){this.settings.el.addEventListener("mouseenter",this._show,!1),this.settings.el.addEventListener("mouseleave",this._hide,!1),this.settings.el.addEventListener("mousemove",this._handleMovement,!1),this.settings.handleTouch&&(this.settings.el.addEventListener("touchstart",this._show,!1),this.settings.el.addEventListener("touchend",this._hide,!1),this.settings.el.addEventListener("touchmove",this._handleMovement,!1))}},{key:"_unbindEvents",value:function(){this.settings.el.removeEventListener("mouseenter",this._show,!1),this.settings.el.removeEventListener("mouseleave",this._hide,!1),this.settings.el.removeEventListener("mousemove",this._handleMovement,!1),this.settings.handleTouch&&(this.settings.el.removeEventListener("touchstart",this._show,!1),this.settings.el.removeEventListener("touchend",this._hide,!1),this.settings.el.removeEventListener("touchmove",this._handleMovement,!1))}},{key:"isShowing",get:function(){return this.settings.zoomPane.isShowing}}]),e}(),r=function(){var e=this;this._show=function(t){t.preventDefault();var i=e.settings.onShow;i&&"function"==typeof i&&i(),e.settings.zoomPane.show(e.settings.el.getAttribute(e.settings.sourceAttribute),e.settings.el.clientWidth),e.settings.imageHighlighter&&e.settings.imageHighlighter.show(e.settings.zoomPane,e.settings.el),e._handleMovement(t)},this._hide=function(t){t.preventDefault();var i=e.settings.onHide;i&&"function"==typeof i&&i(),e.settings.zoomPane.hide(),e.settings.imageHighlighter&&e.settings.imageHighlighter.hide()},this._handleMovement=function(t){if(t.preventDefault(),e.isShowing){var i=void 0,n=void 0;if(t.touches){var s=t.touches[0];i=s.clientX,n=s.clientY}else i=t.clientX,n=t.clientY;var o=e.settings.el,l=o.getBoundingClientRect(),h=i-l.left,a=n-l.top,r=h/e.settings.el.clientWidth,u=a/e.settings.el.clientHeight;e.settings.zoomPane.setPosition(r,u,l),e.settings.imageHighlighter&&e.settings.imageHighlighter.setPosition(r,u)}}};i["default"]=a},{"./util/throwIfMissing":7}],4:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("./util/throwIfMissing"),h=n(l),a=e("./util/dom"),r="undefined"==typeof document?!1:"animation"in document.createElement("div").style,u=function(){function e(){var t=this,i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];s(this,e),this._completeShow=function(){t.el.removeEventListener("animationend",t._completeShow,!1),(0,a.removeClasses)(t.el,t.openingClasses)},this._completeHide=function(){t.el.removeEventListener("animationend",t._completeHide,!1),(0,a.removeClasses)(t.el,t.openClasses),(0,a.removeClasses)(t.el,t.closingClasses),(0,a.removeClasses)(t.el,t.inlineClasses),t.el.setAttribute("style",""),t.el.parentElement===t.settings.container?t.settings.container.removeChild(t.el):t.el.parentElement===t.settings.inlineContainer&&t.settings.inlineContainer.removeChild(t.el)},this.isShowing=!1;var n=i.container,o=void 0===n?null:n,l=i.zoomFactor,r=void 0===l?(0,h["default"])():l,u=i.inline,d=void 0===u?(0,h["default"])():u,c=i.namespace,g=void 0===c?null:c,f=i.showWhitespaceAtEdges,m=void 0===f?(0,h["default"])():f,v=i.containInline,p=void 0===v?(0,h["default"])():v,y=i.inlineOffsetX,w=void 0===y?0:y,b=i.inlineOffsetY,C=void 0===b?0:b;this.settings={container:o,zoomFactor:r,inline:d,namespace:g,showWhitespaceAtEdges:m,containInline:p,inlineOffsetX:w,inlineOffsetY:C},this.settings.inlineContainer=document.body,this.openClasses=this._buildClasses("open"),this.openingClasses=this._buildClasses("opening"),this.closingClasses=this._buildClasses("closing"),this.inlineClasses=this._buildClasses("inline"),this._buildElement()}return o(e,[{key:"_buildClasses",value:function(e){var t=["drift-"+e],i=this.settings.namespace;return i&&t.push(i+"-"+e),t}},{key:"_buildElement",value:function(){this.el=document.createElement("div"),(0,a.addClasses)(this.el,this._buildClasses("zoom-pane"));var e=document.createElement("div");(0,a.addClasses)(e,this._buildClasses("zoom-pane-loader")),this.el.appendChild(e),this.imgEl=document.createElement("img"),this.el.appendChild(this.imgEl)}},{key:"_setImageURL",value:function(e){this.imgEl.setAttribute("src",e)}},{key:"_setImageSize",value:function(e){this.imgEl.style.width=e*this.settings.zoomFactor+"px"}},{key:"getSize",value:function(){return{width:this.el.clientWidth,height:this.el.clientHeight}}},{key:"setPosition",value:function(e,t,i){var n=-(this.imgEl.clientWidth*e-this.el.clientWidth/2),s=-(this.imgEl.clientHeight*t-this.el.clientHeight/2),o=-(this.imgEl.clientWidth-this.el.clientWidth),l=-(this.imgEl.clientHeight-this.el.clientHeight);if(this.el.parentElement===this.settings.inlineContainer){var h=window.scrollX,a=window.scrollY,r=i.left+e*i.width-this.el.clientWidth/2+this.settings.inlineOffsetX+h,u=i.top+t*i.height-this.el.clientHeight/2+this.settings.inlineOffsetY+a;if(this.settings.containInline){this.el.getBoundingClientRect();r<i.left+h?r=i.left+h:r+this.el.clientWidth>i.left+i.width+h&&(r=i.left+i.width-this.el.clientWidth+h),u<i.top+a?u=i.top+a:u+this.el.clientHeight>i.top+i.height+a&&(u=i.top+i.height-this.el.clientHeight+a)}this.el.style.left=r+"px",this.el.style.top=u+"px"}this.settings.showWhitespaceAtEdges||(n>0?n=0:o>n&&(n=o),s>0?s=0:l>s&&(s=l)),this.imgEl.style.transform="translate("+n+"px, "+s+"px)"}},{key:"_removeListenersAndResetClasses",value:function(){this.el.removeEventListener("animationend",this._completeShow,!1),this.el.removeEventListener("animationend",this._completeHide,!1),(0,a.removeClasses)(this.el,this.openClasses),(0,a.removeClasses)(this.el,this.closingClasses)}},{key:"show",value:function(e,t){this._removeListenersAndResetClasses(),this.isShowing=!0,(0,a.addClasses)(this.el,this.openClasses),this._setImageURL(e),this._setImageSize(t),this._isInline?this._showInline():this._showInContainer(),r&&(this.el.addEventListener("animationend",this._completeShow,!1),(0,a.addClasses)(this.el,this.openingClasses))}},{key:"_showInline",value:function(){this.settings.inlineContainer.appendChild(this.el),(0,a.addClasses)(this.el,this.inlineClasses)}},{key:"_showInContainer",value:function(){this.settings.container.appendChild(this.el)}},{key:"hide",value:function(){this._removeListenersAndResetClasses(),this.isShowing=!1,r?(this.el.addEventListener("animationend",this._completeHide,!1),(0,a.addClasses)(this.el,this.closingClasses)):((0,a.removeClasses)(this.el,this.openClasses),(0,a.removeClasses)(this.el,this.inlineClasses))}},{key:"_isInline",get:function(){var e=this.settings.inline;return e===!0||"number"==typeof e&&window.innerWidth<=e}}]),e}();i["default"]=u},{"./util/dom":6,"./util/throwIfMissing":7}],5:[function(e,t,i){"use strict";function n(){if(!document.querySelector(".drift-base-styles")){var e=document.createElement("style");e.type="text/css",e.classList.add("drift-base-styles"),e.appendChild(document.createTextNode(s));var t=document.head;t.insertBefore(e,t.firstChild)}}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n;var s="\n@keyframes noop {  }\n\n.drift-zoom-pane.drift-open {\n  display: block;\n}\n\n.drift-zoom-pane.drift-opening, .drift-zoom-pane.drift-closing {\n  animation: noop;\n}\n\n.drift-zoom-pane {\n  position: absolute;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n}\n\n.drift-zoom-pane-loader {\n  display: none;\n}\n\n.drift-zoom-pane img {\n  position: absolute;\n  display: block;\n}\n"},{}],6:[function(e,t,i){"use strict";function n(e){return h?e instanceof HTMLElement:e&&"object"===("undefined"==typeof e?"undefined":l(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function s(e,t){t.forEach(function(t){e.classList.add(t)})}function o(e,t){t.forEach(function(t){e.classList.remove(t)})}Object.defineProperty(i,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};i.isDOMElement=n,i.addClasses=s,i.removeClasses=o;var h="object"===("undefined"==typeof HTMLElement?"undefined":l(HTMLElement))},{}],7:[function(e,t,i){"use strict";function n(){throw new Error("Missing parameter")}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}]},{},[1])(1)});